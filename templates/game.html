<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Add Particles.js for enhanced effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Animate.css for enhanced animations -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/game.css') }}"
    />
    <title>Ludo Game Board</title>
  </head>
  <body>
    <div class="container-fluid">
      <!-- Game Header with Configuration Display -->
      <div class="game-header">
        <div class="d-flex justify-content-between align-items-center">
          <h1 class="game-title">
            <i class="fas fa-dice-six me-2"></i>
            Ludo Master
          </h1>

          <!-- Configuration Display moved to header -->
          <div class="header-config-display d-flex align-items-center">
            <div class="config-item me-3">
              <i class="fas fa-users me-1"></i>
              <span class="config-label">Players:</span>
              <span class="config-value" id="display-players"
                >{{ num_players }}</span
              >
            </div>
            <div class="config-item me-3">
              <i class="fas fa-chess-pawn me-1"></i>
              <span class="config-label">Tokens:</span>
              <span class="config-value" id="display-tokens"
                >{{ num_tokens }}</span
              >
            </div>
            <div class="config-item me-4">
              <i class="fas fa-th-large me-1"></i>
              <span class="config-label">Board:</span>
              <span class="config-value" id="display-board-size"
                >{{ board_size }}</span
              >
            </div>
            <div class="config-item me-4">
        <i class="fas fa-clock me-1"></i>
        <span class="config-label">Rounds:</span>
        <span class="config-value" id="display-rounds">{{ num_rounds }}</span>
    </div>
          </div>

          <div class="game-controls">
             <button class="btn btn-secondary me-2" id="autoplayBtn" onclick="toggleAutoplay()">
              <i class="fas fa-play me-1"></i> Autoplay
            </button>
            <button class="btn btn-outline-primary me-2" onclick="goHome()">
              <i class="fas fa-home me-1"></i> Home
            </button>
            <button class="btn btn-warning me-2" onclick="openGameInfo()">
              <i class="fas fa-scroll me-1"></i> Game Info
            </button>
            <button class="btn btn-info me-2" onclick="openGameLogs()">
              <i class="fas fa-clipboard-list me-1"></i> Game Logs
            </button>
            <button class="btn btn-success" onclick="regenerateBoard()">
              <i class="fas fa-sync me-1"></i> New Game
            </button>
          </div>
        </div>
      </div>

      <!-- Game Board Container - Full width and height -->
      <div class="game-container">
        <div class="board-wrapper">
          <div id="ludoBoard" class="ludo-board"></div>
        </div>

        <!-- 3D Dice Container - Bottom Left -->
        <div class="dice-container">
          <div class="dice-card">
            <div class="dice-header">
              <h5 class="dice-title">
                <i class="fas fa-dice me-2"></i>
                Roll Dice
              </h5>
              <div class="current-player">
                <span class="player-indicator" id="currentPlayerIndicator"
                  >Player 1</span
                >
              </div>
            </div>

            <div class="dice-area">
              <!-- Three 3D Dice -->
              <div class="dice-wrapper">
                <div class="dice" id="dice1">
                  <div class="dice-face dice-face-1" data-value="1">
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-2" data-value="2">
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-3" data-value="3">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-4" data-value="4">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-5" data-value="5">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-6" data-value="6">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                </div>

                <div class="dice" id="dice2">
                  <div class="dice-face dice-face-1" data-value="1">
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-2" data-value="2">
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-3" data-value="3">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-4" data-value="4">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-5" data-value="5">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-6" data-value="6">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                </div>

                <div class="dice" id="dice3">
                  <div class="dice-face dice-face-1" data-value="1">
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-2" data-value="2">
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-3" data-value="3">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-4" data-value="4">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-5" data-value="5">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <div class="dice-face dice-face-6" data-value="6">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                </div>
              </div>

              <!-- Dice Values Display -->
              <div class="dice-values" id="diceValues">
                <div class="dice-value" id="value1">1</div>
                <div class="dice-value" id="value2">2</div>
                <div class="dice-value" id="value3">3</div>
              </div>
            </div>

            <!-- Roll Button -->
            <div class="dice-controls">
              <button
                class="btn-roll-dice"
                id="rollDiceBtn"
                onclick="rollDice()"
              >
                <i class="fas fa-dice-d6 me-2"></i>
                <span class="roll-text">Roll Dice</span>
                <div class="roll-effects"></div>
              </button>

              <!-- Move Sequence Display -->
              <div class="move-sequence" id="moveSequence">
                <div class="sequence-info">Next moves:</div>
                <div class="move-order" id="moveOrder">
                  <span class="move-step player-1">P1</span>
                  <span class="move-step player-2">P2</span>
                  <span class="move-step player-1">P1</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>







    <!-- Bonus Dice Roll Container - Bottom Right -->
    <div class="bonus-dice-container" id="bonusDiceContainer">
        <div class="bonus-dice-card">
            <div class="bonus-header">
                <div class="bonus-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="bonus-info">
                    <div class="bonus-title">BONUS ROLL!</div>
                    <div class="bonus-player" id="bonusPlayerName">Player 1</div>
                </div>
                <div class="bonus-streak" id="bonusStreak">×2</div>
            </div>
            
            <div class="bonus-dice-area">
                <div class="bonus-dice-wrapper">
                    <div class="bonus-dice" id="bonusDice">
                        <div class="bonus-dice-face bonus-dice-face-1" data-value="1">
                            <span class="bonus-dot"></span>
                        </div>
                        <div class="bonus-dice-face bonus-dice-face-2" data-value="2">
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                        </div>
                        <div class="bonus-dice-face bonus-dice-face-3" data-value="3">
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                        </div>
                        <div class="bonus-dice-face bonus-dice-face-4" data-value="4">
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                        </div>
                        <div class="bonus-dice-face bonus-dice-face-5" data-value="5">
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                        </div>
                        <div class="bonus-dice-face bonus-dice-face-6" data-value="6">
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                            <span class="bonus-dot"></span>
                        </div>
                    </div>
                </div>
                
                <div class="bonus-dice-value" id="bonusDiceValue">6</div>
                <div class="bonus-message" id="bonusMessage">Rolling for bonus move...</div>
            </div>
            
            <div class="bonus-effects">
                <div class="bonus-sparkle"></div>
                <div class="bonus-sparkle"></div>
                <div class="bonus-sparkle"></div>
                <div class="bonus-glow"></div>
            </div>
        </div>
    </div>

    <!-- Game Logs Modal -->
    <div
      class="modal fade"
      id="gameLogsModal"
      tabindex="-1"
      aria-labelledby="gameLogsModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content logs-modal-content">
          <div class="modal-header logs-modal-header">
            <div class="logs-header-content">
              <h3 class="modal-title logs-modal-title" id="gameLogsModalLabel">
                <i class="fas fa-chart-line me-3"></i>
                Game Analytics & Move History
              </h3>
              <div class="logs-stats-summary">
                <div class="stat-item">
                  <span class="stat-label">Total Moves:</span>
                  <span class="stat-value" id="totalMovesCount">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Current Round:</span>
                  <span class="stat-value" id="currentRoundDisplay">1</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Game Duration:</span>
                  <span class="stat-value" id="gameDurationDisplay">00:00</span>
                </div>
              </div>
            </div>
            <button
              type="button"
              class="btn-close logs-btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body logs-modal-body">
            <!-- Filter Controls -->
            <div class="logs-filter-section">
              <div class="filter-group">
                <label class="filter-label">Filter by Player:</label>
                <div class="filter-buttons">
                  <button class="filter-btn active" data-filter="all">
                    All Players
                  </button>
                  <button class="filter-btn player-1" data-filter="1">
                    Player 1
                  </button>
                  <button class="filter-btn player-2" data-filter="2">
                    Player 2
                  </button>
                  <button
                    class="filter-btn player-3"
                    data-filter="3"
                    style="display: none"
                  >
                    Player 3
                  </button>
                  <button
                    class="filter-btn player-4"
                    data-filter="4"
                    style="display: none"
                  >
                    Player 4
                  </button>
                </div>
              </div>

              <div class="filter-group">
                <label class="filter-label">Move Type:</label>
                <div class="filter-buttons">
                  <button class="filter-btn active" data-type="all">
                    All Moves
                  </button>
                  <button class="filter-btn" data-type="regular">
                    Regular
                  </button>
                  <button class="filter-btn" data-type="bonus">Bonus</button>
                  <button class="filter-btn" data-type="capture">
                    Captures
                  </button>
                  <button class="filter-btn" data-type="finish">
                    Finishes
                  </button>
                </div>
              </div>
            </div>

            <!-- Game Statistics Dashboard -->
            <div class="logs-dashboard">
              <div class="dashboard-row">
                <div class="dashboard-card player-stats-card">
                  <h5 class="card-title">
                    <i class="fas fa-users"></i>
                    Player Statistics
                  </h5>
                  <div class="player-stats-grid" id="playerStatsGrid">
                    <!-- Player stats will be populated here -->
                  </div>
                </div>

                <div class="dashboard-card dice-analytics-card">
                  <h5 class="card-title">
                    <i class="fas fa-dice-six"></i>
                    Dice Analytics
                  </h5>
                  <div class="dice-stats" id="diceStatsContainer">
                    <!-- Dice statistics will be populated here -->
                  </div>
                </div>
              </div>

              <div class="dashboard-row">
                <div class="dashboard-card recent-activity-card">
                  <h5 class="card-title">
                    <i class="fas fa-clock"></i>
                    Recent Activity
                  </h5>
                  <div class="recent-activity-list" id="recentActivityList">
                    <!-- Recent activities will be populated here -->
                  </div>
                </div>

                <div class="dashboard-card game-progress-card">
                  <h5 class="card-title">
                    <i class="fas fa-trophy"></i>
                    Game Progress
                  </h5>
                  <div class="progress-visualization" id="gameProgressViz">
                    <!-- Progress bars will be populated here -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Detailed Move Logs -->
            <div class="logs-timeline-section">
              <h4 class="timeline-title">
                <i class="fas fa-history me-2"></i>
                Detailed Move Timeline
              </h4>
              <div class="logs-timeline" id="gameLogsTimeline">
                <!-- Timeline entries will be populated here -->
              </div>
            </div>
          </div>

          <div class="modal-footer logs-modal-footer">
            <button
              type="button"
              class="btn btn-outline-secondary"
              onclick="exportGameLogs()"
            >
              <i class="fas fa-download me-2"></i>
              Export Logs
            </button>
            <button
              type="button"
              class="btn btn-outline-danger"
              onclick="clearGameLogs()"
            >
              <i class="fas fa-trash me-2"></i>
              Clear Logs
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
            >
              <i class="fas fa-times me-2"></i>
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Info Modal - Ancient Scroll Style -->
    <div
      class="modal fade"
      id="gameInfoModal"
      tabindex="-1"
      aria-labelledby="gameInfoModalLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-lg modal-dialog-scrollable modal-dialog-centered"
      >
        <div class="modal-content scroll-modal-content">
          <!-- Scroll Header -->
          <div class="scroll-header">
            <div class="scroll-rod scroll-rod-left"></div>
            <div class="scroll-rod scroll-rod-right"></div>
            <div class="scroll-title-section">
              <h2 class="scroll-title" id="gameInfoModalLabel">
                <i class="fas fa-dice-d20 me-3"></i>
                The Ancient Art of 3-Dice Ludo
              </h2>
              <div class="scroll-subtitle">
                A Revolutionary Gaming Experience
              </div>
            </div>
            <button
              type="button"
              class="scroll-close-btn"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>

          <!-- Scroll Body -->
          <div class="modal-body scroll-body">
            <div class="scroll-content">
              <!-- Introduction Section -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-star-of-life"></i>
                  Welcome, Noble Player!
                </h3>
                <div class="section-content">
                  <p class="scroll-text">
                    Prepare yourself for an extraordinary twist on the classic
                    game of Ludo! Our innovative
                    <strong>3-Dice Revolutionary System</strong> with <strong>Smart AI Strategies</strong> 
                    transforms the traditional gameplay into an epic battle of intelligence, tactics, and destiny.
                  </p>
                  <p class="scroll-text">
                    Choose your board size, select the number of rounds, and watch three different AI personalities 
                    battle it out using completely different playing styles. Every game is a unique strategic experience!
                  </p>
                </div>
              </div>

              <!-- The Magic of Three Dice -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-dice-three"></i>
                  The Revolutionary 3-Dice System
                </h3>
                <div class="section-content">
                  <div class="magic-dice-container">
                    <div class="magic-dice">
                      <div class="dice-icon">🎲</div>
                      <div class="dice-label">Dice Roll</div>
                      <div class="dice-description">Three dice rolled together</div>
                    </div>
                    <div class="magic-dice">
                      <div class="dice-icon">🎯</div>
                      <div class="dice-label">Smart Selection</div>
                      <div class="dice-description">AI chooses best dice</div>
                    </div>
                    <div class="magic-dice">
                      <div class="dice-icon">⚡</div>
                      <div class="dice-label">Strategic Play</div>
                      <div class="dice-description">Each AI thinks differently</div>
                    </div>
                  </div>
                  <p class="scroll-text">
                    Unlike traditional Ludo where you get one dice, our system rolls <strong>three dice at once</strong>! 
                    But here's the twist: different AI strategies use these dice in completely different ways.
                  </p>
                  <p class="scroll-text">
                    The <strong>Predictable</strong> bot always uses the first dice. The <strong>Aggressive</strong> bot 
                    chooses the best dice for attack or promotion. The <strong>Responsible Pair</strong> bot carefully 
                    selects dice based on safety and strategic positioning. This creates dynamic, unpredictable gameplay!
                  </p>
                </div>
              </div>

              <!-- AI Strategy Personalities -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-brain"></i>
                  The Three AI Personalities
                </h3>
                <div class="section-content">
                  <div class="strategy-personalities">
                    <!-- Predictable Strategy -->
                    <div class="personality-card predictable">
                      <div class="personality-header">
                        <div class="personality-icon">
                          <i class="fas fa-route"></i>
                        </div>
                        <div class="personality-info">
                          <h4 class="personality-name">The Predictable Strategist</h4>
                          <p class="personality-motto">"Steady wins the race"</p>
                        </div>
                      </div>
                      <div class="personality-traits">
                        <div class="trait-item">
                          <strong>Dice Strategy:</strong> Always uses the first dice value from the roll
                        </div>
                        <div class="trait-item">
                          <strong>Token Movement:</strong> Focuses on moving one token at a time to completion
                        </div>
                        <div class="trait-item">
                          <strong>Playing Style:</strong> Safe, systematic, and methodical approach
                        </div>
                        <div class="trait-item">
                          <strong>Best Against:</strong> Other predictable opponents in long games
                        </div>
                      </div>
                    </div>

                    <!-- Aggressive Strategy -->
                    <div class="personality-card aggressive">
                      <div class="personality-header">
                        <div class="personality-icon">
                          <i class="fas fa-fire"></i>
                        </div>
                        <div class="personality-info">
                          <h4 class="personality-name">The Aggressive Warrior</h4>
                          <p class="personality-motto">"Attack is the best defense"</p>
                        </div>
                      </div>
                      <div class="personality-traits">
                        <div class="trait-item">
                          <strong>Dice Strategy:</strong> Analyzes all three dice and picks the most advantageous one
                        </div>
                        <div class="trait-item">
                          <strong>Token Movement:</strong> Prioritizes captures, promotions, and risky advances
                        </div>
                        <div class="trait-item">
                          <strong>Playing Style:</strong> Bold, opportunistic, and fast-paced
                        </div>
                        <div class="trait-item">
                          <strong>Best Against:</strong> Passive opponents who leave openings for attack
                        </div>
                      </div>
                    </div>

                    <!-- Responsible Pair Strategy -->
                    <div class="personality-card responsible">
                      <div class="personality-header">
                        <div class="personality-icon">
                          <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="personality-info">
                          <h4 class="personality-name">The Responsible Pair Master</h4>
                          <p class="personality-motto">"Wisdom guides every move"</p>
                        </div>
                      </div>
                      <div class="personality-traits">
                        <div class="trait-item">
                          <strong>Dice Strategy:</strong> Carefully selects dice based on 7 priority levels
                        </div>
                        <div class="trait-item">
                          <strong>Token Movement:</strong> Moves tokens in coordinated pairs with strategic positioning
                        </div>
                        <div class="trait-item">
                          <strong>Playing Style:</strong> Balanced mix of safety and calculated aggression
                        </div>
                        <div class="trait-item">
                          <strong>Best Against:</strong> Balanced performance against all opponent types
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- How Turn System Works -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-sync-alt"></i>
                  How the Turn System Works
                </h3>
                <div class="section-content">
                  <div class="turn-system-explanation">
                    <div class="turn-step">
                      <div class="step-number">1</div>
                      <div class="step-content">
                        <strong>Dice Roll Phase</strong>
                        <p>Current player rolls three dice simultaneously (e.g., 3, 5, 2)</p>
                      </div>
                    </div>
                    <div class="flow-arrow">⬇️</div>
                    <div class="turn-step">
                      <div class="step-number">2</div>
                      <div class="step-content">
                        <strong>First Move</strong>
                        <p>Roller chooses from available dice based on their strategy</p>
                        <div class="strategy-examples">
                          <span class="example predictable">Predictable: Takes 3 (first dice)</span>
                          <span class="example aggressive">Aggressive: Takes 5 (best for attack)</span>
                          <span class="example responsible">Responsible: Takes 2 (safest move)</span>
                        </div>
                      </div>
                    </div>
                    <div class="flow-arrow">⬇️</div>
                    <div class="turn-step">
                      <div class="step-number">3</div>
                      <div class="step-content">
                        <strong>Opponent's Turn</strong>
                        <p>Opponent chooses from remaining dice using their strategy</p>
                        <div class="remaining-dice">Remaining dice: 5, 2 (if roller took 3)</div>
                      </div>
                    </div>
                    <div class="flow-arrow">⬇️</div>
                    <div class="turn-step">
                      <div class="step-number">4</div>
                      <div class="step-content">
                        <strong>Final Move</strong>
                        <p>Roller uses the last remaining dice</p>
                        <div class="final-dice">Final dice: 2 (last remaining)</div>
                      </div>
                    </div>
                  </div>
                  <p class="scroll-text">
                    This system creates <strong>strategic depth</strong> because aggressive players might "steal" 
                    the best dice values, while responsible players might take safer options, forcing others 
                    to adapt their moves!
                  </p>
                </div>
              </div>

              <!-- Strategy Showdowns -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-fist-raised"></i>
                  Epic Strategy Showdowns
                </h3>
                <div class="section-content">
                  <div class="showdown-grid">
                    <div class="showdown-card">
                      <div class="showdown-header">
                        <div class="vs-players">
                          <div class="player-icon predictable">
                            <i class="fas fa-route"></i>
                          </div>
                          <div class="vs-text">VS</div>
                          <div class="player-icon aggressive">
                            <i class="fas fa-fire"></i>
                          </div>
                        </div>
                        <h4>Predictable vs Aggressive</h4>
                      </div>
                      <div class="showdown-description">
                        <p><strong>The Classic Battle:</strong> Order vs Chaos</p>
                        <p>Predictable plays safe and steady, while Aggressive steals the best dice and goes for risky captures. 
                        Expect lots of token captures and dramatic comebacks!</p>
                        <div class="outcome-prediction">
                          <strong>Likely Outcome:</strong> Aggressive wins in short games, Predictable in longer matches
                        </div>
                      </div>
                    </div>

                    <div class="showdown-card">
                      <div class="showdown-header">
                        <div class="vs-players">
                          <div class="player-icon responsible">
                            <i class="fas fa-shield-alt"></i>
                          </div>
                          <div class="vs-text">VS</div>
                          <div class="player-icon aggressive">
                            <i class="fas fa-fire"></i>
                          </div>
                        </div>
                        <h4>Responsible vs Aggressive</h4>
                      </div>
                      <div class="showdown-description">
                        <p><strong>The Strategic Duel:</strong> Wisdom vs Warfare</p>
                        <p>Both players fight for the best dice! Responsible uses 7-priority system to counter 
                        Aggressive's attacks while building safe token pairs. Intense tactical gameplay!</p>
                        <div class="outcome-prediction">
                          <strong>Likely Outcome:</strong> Very close games with multiple lead changes
                        </div>
                      </div>
                    </div>

                    <div class="showdown-card">
                      <div class="showdown-header">
                        <div class="vs-players">
                          <div class="player-icon predictable">
                            <i class="fas fa-route"></i>
                          </div>
                          <div class="vs-text">VS</div>
                          <div class="player-icon responsible">
                            <i class="fas fa-shield-alt"></i>
                          </div>
                        </div>
                        <h4>Predictable vs Responsible</h4>
                      </div>
                      <div class="showdown-description">
                        <p><strong>The Thinking Match:</strong> Simple vs Complex</p>
                        <p>Responsible gets advantage by choosing better dice while Predictable sticks to first dice. 
                        Responsible's pair strategy often outmaneuvers simple single-token focus.</p>
                        <div class="outcome-prediction">
                          <strong>Likely Outcome:</strong> Responsible wins due to superior dice selection
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Responsible Pair Strategy Deep Dive -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-chess"></i>
                  The Responsible Pair System
                </h3>
                <div class="section-content">
                  <p class="scroll-text">
                    The most sophisticated AI strategy uses a <strong>7-priority decision system</strong> 
                    to make every move count. Here's how it thinks:
                  </p>
                  <div class="priority-system">
                    <div class="priority-item priority-1">
                      <div class="priority-number">1</div>
                      <div class="priority-content">
                        <strong>Promotion Priority:</strong> Always finish a token if possible
                      </div>
                    </div>
                    <div class="priority-item priority-2">
                      <div class="priority-number">2</div>
                      <div class="priority-content">
                        <strong>Capture Opportunity:</strong> Attack vulnerable enemy tokens
                      </div>
                    </div>
                    <div class="priority-item priority-3">
                      <div class="priority-number">3</div>
                      <div class="priority-content">
                        <strong>Situational Aggression:</strong> Attack when opponent is close to winning
                      </div>
                    </div>
                    <div class="priority-item priority-4">
                      <div class="priority-number">4</div>
                      <div class="priority-content">
                        <strong>Safe Square Movement:</strong> Move to protected positions
                      </div>
                    </div>
                    <div class="priority-item priority-5">
                      <div class="priority-number">5</div>
                      <div class="priority-content">
                        <strong>Chase Strategy:</strong> Position tokens to threaten enemies later
                      </div>
                    </div>
                    <div class="priority-item priority-6">
                      <div class="priority-number">6</div>
                      <div class="priority-content">
                        <strong>Pair Building:</strong> Move tokens together toward mid-game safe zone
                      </div>
                    </div>
                    <div class="priority-item priority-7">
                      <div class="priority-number">7</div>
                      <div class="priority-content">
                        <strong>Pair Advancement:</strong> Coordinate tokens after reaching safe zone
                      </div>
                    </div>
                  </div>
                  <p class="scroll-text">
                    This creates an AI that plays like a chess master - always thinking several moves ahead 
                    and adapting its strategy based on the game situation!
                  </p>
                </div>
              </div>

              <!-- Bonus Moves Magic -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-magic"></i>
                  The Bonus Moves Magic
                </h3>
                <div class="section-content">
                  <div class="bonus-triggers">
                    <div class="bonus-trigger">
                      <div class="trigger-icon">⚅</div>
                      <div class="trigger-title">Rolling a Six</div>
                      <div class="trigger-desc">Get another dice roll instantly!</div>
                    </div>
                    <div class="bonus-trigger">
                      <div class="trigger-icon">🏠</div>
                      <div class="trigger-title">Reaching Home</div>
                      <div class="trigger-desc">Token finishes, earn bonus move!</div>
                    </div>
                    <div class="bonus-trigger">
                      <div class="trigger-icon">⚔️</div>
                      <div class="trigger-title">Capturing Enemy</div>
                      <div class="trigger-desc">Send opponent back, get reward!</div>
                    </div>
                  </div>
                  <p class="scroll-text">
                    These magical events can create <strong>incredible chain reactions</strong>! An Aggressive 
                    bot might roll a six, use it to capture an enemy (getting another bonus), then roll another 
                    six - creating a devastating combo that changes the entire game!
                  </p>
                  <div class="bonus-chain-example">
                    <div class="chain-step">
                      <span class="chain-label">Roll 6</span>
                      <span class="chain-arrow">→</span>
                      <span class="chain-label">Capture Enemy</span>
                      <span class="chain-arrow">→</span>
                      <span class="chain-label">Bonus Roll</span>
                      <span class="chain-arrow">→</span>
                      <span class="chain-label">Another 6!</span>
                    </div>
                    <div class="chain-result">
                      <strong>Result:</strong> One turn becomes 4+ moves with massive point gain!
                    </div>
                  </div>
                </div>
              </div>

              <!-- Scoring System -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-trophy"></i>
                  The Dynamic Scoring System
                </h3>
                <div class="section-content">
                  <div class="scoring-rules">
                    <div class="score-rule positive">
                      <div class="rule-icon">✅</div>
                      <div class="rule-content">
                        <strong>Earn Points:</strong> +1 point for every square you move forward
                      </div>
                    </div>
                    <div class="score-rule positive">
                      <div class="rule-icon">🏆</div>
                      <div class="rule-content">
                        <strong>Finish Bonus:</strong> Points equal to distance covered when token reaches home
                      </div>
                    </div>
                    <div class="score-rule negative">
                      <div class="rule-icon">💔</div>
                      <div class="rule-content">
                        <strong>Capture Penalty:</strong> Lose all points that token had earned when captured
                      </div>
                    </div>
                  </div>
                  <p class="scroll-text">
                    This creates <strong>real consequences</strong> for every move! Aggressive bots risk losing 
                    points for captures, while Responsible bots build steady point totals. Watch the live 
                    scoreboard to see strategies paying off in real-time!
                  </p>
                  <div class="scoring-example">
                    <div class="example-scenario">
                      <strong>Example:</strong> Your token travels 25 squares then gets captured
                    </div>
                    <div class="example-calculation">
                      <span class="calculation-step">Points earned: +25</span>
                      <span class="calculation-arrow">→</span>
                      <span class="calculation-step">Capture penalty: -25</span>
                      <span class="calculation-arrow">→</span>
                      <span class="calculation-result">Net result: 0 points</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Safe Zones and Battles -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-shield-alt"></i>
                  Safe Zones & Epic Battles
                </h3>
                <div class="section-content">
                  <div class="battle-system">
                    <div class="battle-card safe">
                      <div class="card-icon">🛡️</div>
                      <div class="card-title">Safe Zones</div>
                      <div class="card-desc">
                        Special starred squares are <strong>sanctuaries</strong>! No token can be captured 
                        here. Responsible bots love these spots, while Aggressive bots use them for strategic positioning.
                      </div>
                    </div>
                    <div class="battle-card danger">
                      <div class="card-icon">⚔️</div>
                      <div class="card-title">Battle Zones</div>
                      <div class="card-desc">
                        All other squares are <strong>danger zones</strong>! Land on an enemy token? 
                        CAPTURED! They lose points and restart, while you get a bonus move and keep your momentum!
                      </div>
                    </div>
                  </div>
                  <div class="strategy-battle-tips">
                    <h4>Strategy Battle Tips:</h4>
                    <ul class="battle-tips-list">
                      <li><strong>Against Aggressive:</strong> Use safe zones to avoid their attacks</li>
                      <li><strong>Against Predictable:</strong> Predict their moves and set traps</li>
                      <li><strong>Against Responsible:</strong> Disrupt their pair formations early</li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Victory Conditions -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-crown"></i>
                  Path to Victory
                </h3>
                <div class="section-content">
                  <div class="victory-path">
                    <div class="victory-step">
                      <div class="victory-icon">🎯</div>
                      <div class="victory-text">
                        <strong>Ultimate Goal:</strong> Get all your tokens to the center home area first
                      </div>
                    </div>
                    <div class="victory-step">
                      <div class="victory-icon">⏱️</div>
                      <div class="victory-text">
                        <strong>Time Limit:</strong> Limited moves per player based on rounds selected (no endless games!)
                      </div>
                    </div>
                    <div class="victory-step">
                      <div class="victory-icon">🏆</div>
                      <div class="victory-text">
                        <strong>Instant Win:</strong> First player to get all tokens home wins immediately
                      </div>
                    </div>
                    <div class="victory-step">
                      <div class="victory-icon">📊</div>
                      <div class="victory-text">
                        <strong>Score Victory:</strong> If time runs out, highest score wins the crown
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Game Customization -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-cogs"></i>
                  Customize Your Battle
                </h3>
                <div class="section-content">
                  <div class="customization-options">
                    <div class="custom-option">
                      <div class="option-icon">📏</div>
                      <div class="option-content">
                        <strong>Board Size:</strong> Choose from 7x7 to 13x13 grids for different game lengths
                      </div>
                    </div>
                    <div class="custom-option">
                      <div class="option-icon">🎮</div>
                      <div class="option-content">
                        <strong>Token Count:</strong> Play with 2-4 tokens per player for varying complexity
                      </div>
                    </div>
                    <div class="custom-option">
                      <div class="option-icon">🕒</div>
                      <div class="option-content">
                        <strong>Round Limit:</strong> Set 8-32 rounds to control game duration
                      </div>
                    </div>
                    <div class="custom-option">
                      <div class="option-icon">🤖</div>
                      <div class="option-content">
                        <strong>AI Strategies:</strong> Mix and match different bot personalities for unique matchups
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Why It's Revolutionary -->
              <div class="scroll-section">
                <h3 class="section-title">
                  <i class="fas fa-rocket"></i>
                  Why This Changes Everything
                </h3>
                <div class="section-content">
                  <div class="revolution-points">
                    <div class="revolution-point">
                      <div class="point-icon">🧠</div>
                      <div class="point-content">
                        <strong>AI Intelligence:</strong> Three different AI personalities that actually think 
                        differently, creating unique gameplay every time!
                      </div>
                    </div>
                    <div class="revolution-point">
                      <div class="point-icon">🎲</div>
                      <div class="point-content">
                        <strong>Strategic Dice:</strong> Multiple dice with intelligent selection creates 
                        deeper strategy than simple random rolls!
                      </div>
                    </div>
                    <div class="revolution-point">
                      <div class="point-icon">⚡</div>
                      <div class="point-content">
                        <strong>Dynamic Gameplay:</strong> Every game feels different based on AI matchups 
                        and their strategic interactions!
                      </div>
                    </div>
                    <div class="revolution-point">
                      <div class="point-icon">📈</div>
                      <div class="point-content">
                        <strong>Live Analytics:</strong> Watch detailed game logs and see exactly how each 
                        AI strategy performs in real-time!
                      </div>
                    </div>
                    <div class="revolution-point">
                      <div class="point-icon">🎢</div>
                      <div class="point-content">
                        <strong>Dramatic Moments:</strong> Bonus chains, strategic captures, and last-minute 
                        comebacks create edge-of-your-seat excitement!
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Final Wisdom -->
              <div class="scroll-section final-wisdom">
                <h3 class="section-title">
                  <i class="fas fa-gem"></i>
                  Ancient Wisdom for Modern Gamers
                </h3>
                <div class="section-content">
                  <div class="wisdom-quote">
                    <div class="quote-mark">"</div>
                    <div class="quote-text">
                      In this realm of intelligent dice and thinking machines, victory belongs not to luck alone, 
                      but to understanding the <strong>mind of your artificial opponent</strong>.
                      <br /><br />
                      Watch how the <strong>Aggressive</strong> warrior charges forward, how the <strong>Predictable</strong> 
                      sage follows ancient patterns, and how the <strong>Responsible Pair</strong> master weaves 
                      complex strategies like silk.
                      <br /><br />
                      Each game tells a story of artificial intelligence, strategic thinking, and the 
                      eternal dance between order and chaos.
                      <br /><br />
                      May your understanding be deep, your observations keen, and your strategic insights ever sharp!
                    </div>
                    <div class="quote-mark">"</div>
                  </div>
                  <div class="wisdom-signature">~ The Masters of Digital Strategy</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Scroll Footer -->
          <div class="scroll-footer">
            <div class="scroll-rod scroll-rod-bottom-left"></div>
            <div class="scroll-rod scroll-rod-bottom-right"></div>
            <div class="footer-content">
              <button
                type="button"
                class="btn scroll-btn"
                data-bs-dismiss="modal"
              >
                <i class="fas fa-scroll me-2"></i>
                Close the Ancient Scroll
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pass Flask data to JavaScript -->
    <script>
      window.gameConfig = {
        numPlayers: "{{ num_players }}",
        numTokens: "{{ num_tokens }}",
        boardSize: "{{ board_size }}",
        numRounds: "{{ num_rounds }}",
        player1Strategy: "{{ player1_strategy }}",
        player2Strategy: "{{ player2_strategy }}"
      };
      console.log("Game config loaded:", window.gameConfig);
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script
      type="module"
      src="{{ url_for('static', filename='js/game.js') }}"
    ></script>
    <!-- Dice JS -->
    <script src="{{ url_for('static', filename='js/dice.js') }}"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS animations
        AOS.init({
            duration: 1000,
            easing: 'ease-in-out',
            once: false,
            mirror: true
        });
    </script>
  </body>
</html>
